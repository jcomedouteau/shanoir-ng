<!--
Shanoir NG - Import, manage and share neuroimaging data
Copyright (C) 2009-2019 Inria - https://www.inria.fr/
Contact us on https://project.inria.fr/shanoir/

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

You should have received a copy of the GNU General Public License
along with this program. If not, see https://www.gnu.org/licenses/gpl-3.0.html
-->

<div class="header command-zone">1. Select Brainvision archive</div>
<fieldset>
    <p>Please select a nifti file to import in a zip file </p>

    <upload-file (fileChange)="uploadArchive($event)" [loading]="archiveStatus == 'uploading'" [error]="archiveStatus == 'error'"></upload-file>
    
    <label *ngIf="errorMessage" class="form-validation-alert" i18n="Import|ExtensionError label">
        {{errorMessage}}
    </label>

    <div *ngIf="archiveStatus=='uploaded'">
        <p> Select parent dataset </p>
        <ol>
            <legend>
                Research study
                <tool-tip>A research study is the global study context. Examples: Children dysphasia, Therapeutic effect of mitoxantrone in multiple sclerosis, based on MRI and clinical criteria...</tool-tip>
            </legend>
            <li class="required">
                <label class="required-label">Select an existing research study</label> 
                <span class="right-col">
                    <select-box [(ngModel)]="study" (change)="onSelectStudy();"
                            [optionArr]="studies">
                    </select-box>
                </span>
            </li>
            <li class="required">
                <label class="required-label">Select a subject</label> 
                <span class="right-col">
                    <select-box [disabled]="!study" [(ngModel)]="subject" (change)="onSelectSubject();" 
                            [optionArr]="subjects">
                    </select-box>
                </span>
            </li>
            <li class="required">
                <label class="required-label">Select a parent dataset</label> 
                <span class="right-col">
                    <select-box [disabled]="!subject" [(ngModel)]="parentDataset"
                            [optionArr]="datasets">
                    </select-box>
                </span>
            </li>
        </ol>

    </div>
</fieldset>
<button class="next" [disabled]="!valid" (click)="next()">Import</button>